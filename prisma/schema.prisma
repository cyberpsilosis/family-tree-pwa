// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                    String   @id @default(cuid())
  firstName             String
  lastName              String
  birthYear             Int      // last two digits (99 = 1999)
  password              String   // hashed with bcrypt
  email                 String   @unique
  phone                 String?
  birthday              DateTime
  preferredContactMethod String? // "phone", "email", "text"
  instagram             String?
  facebook              String?
  twitter               String?
  linkedin              String?
  profilePhotoUrl       String?
  address               String?
  theme                 String   @default("light") // "light" or "dark"
  isAdmin               Boolean  @default(false)
  favoriteTeam          String?  // "49ers", "Raiders", "Other"
  
  // Family tree relationships
  parentId              String?
  parent                User?    @relation("FamilyTree", fields: [parentId], references: [id], onDelete: SetNull)
  children              User[]   @relation("FamilyTree")
  
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
}

model Admin {
  id        String   @id @default(cuid())
  password  String   // hashed admin password
  email     String   @unique
  createdAt DateTime @default(now())
}
